define(["jquery","routing"],function(a,b){"use strict";return a.fn.entitySearchWidget=function(c){return c=a.extend({limit:8},c),this.each(function(){var d=a(this),e=b.generate(d.data("search")),f=b.generate(d.data("find")),g=1==d.data("clear");d.select2({placeholder:"Rechercher ...",minimumInputLength:0,allowClear:g,ajax:{quietMillis:300,url:e,dataType:"jsonp",data:function(a){return{limit:c.limit,search:a}},results:function(a){return{results:a.results}}},initSelection:function(b,c){var d=parseInt(b.val());d>0&&a.ajax({url:f,data:{id:d},dataType:"json"}).done(function(a){c(a)})}})}),this},{init:function(a){a.entitySearchWidget()}}});