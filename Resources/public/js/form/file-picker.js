define(["jquery","ekyna-string"],function(a){"use strict";return a.fn.filePickerWidget=function(){return this.each(function(){var b=a(this),c=b.find("input:file"),d=b.find("input:text"),e=d.data("current")||null,f=b.find('button[data-role="pick"]'),g=b.find('button[data-role="clear"]');f.unbind("click").bind("click",function(a){a.preventDefault(),c.trigger("click")}),g.unbind("click").bind("click",function(a){a.preventDefault(),c.files&&(c.files=[]),d.val(e),c.val(null).trigger("change"),b.trigger(jQuery.Event("ekyna.upload.clear"))}).trigger("click"),d.unbind("click").bind("click",function(a){a.preventDefault(),c.trigger("click")}),c.unbind("change").bind("change",function(){var a=c.val();0<a.length?d.val(a.fileName()):d.val(e),b.trigger(jQuery.Event("ekyna.upload.change"))})}),this},{init:function(a){a.filePickerWidget()}}});